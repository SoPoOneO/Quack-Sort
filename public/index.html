<html>
<head>
<style>
.duck {
    width: 100px;
    height: 100px;
    border: 1px solid black;
    display: inline-block;
    text-align: center;
    padding-top: 35px;
    box-sizing: border-box;
    font-size: 2em;
    margin: 8px;
    cursor: pointer;
}

.source_index {
    background-color: red;
}

.target_duck {
    background-color: orange;
}
</style>
<script src="https://cdn.jsdelivr.net/npm/vue@2.5.16/dist/vue.js"></script>


</head>
<body>
<div id="row">
  <div class="duck" :class="getDuckClass(index)" v-for="(duck, index) in ducks" @click="handleDuckClick(duck, index)">
    {{ duck }}
  </div>
</div>

<script>

Number.prototype.mod = function(n) {
    return ((this%n)+n)%n;
};

var ducks = [6,5,4,3,2,1,0];
var v = new Vue({
  el: '#row',
  data: {
    ducks: ducks,
    source_index: null
  },
  computed: {
    left_target_index: function(){
        return this.source_index === null ?
               null :
               (this.source_index-this.ducks[this.source_index]).mod(this.ducks.length);
    },
    right_target_index: function(){
        return this.source_index === null ?
               null :
               (this.source_index+this.ducks[this.source_index]).mod(this.ducks.length);
    }
  },
  methods: {
    getDuckValue: function(index){
        return index === null ?
               null :
               this.ducks[index];
    },
    handleDuckClick: function(duck, clicked_index) {
        // if we're re-clicking the source... clear it
        if(this.source_index == clicked_index){
            this.source_index = null;
        // else if we're clicking a target... act on that
        }else if(this.right_target_index == clicked_index || this.left_target_index == clicked_index){
            var source_value = this.getDuckValue(this.source_index);
            var target_value = this.getDuckValue(clicked_index);
            Vue.set(v.ducks, this.source_index, target_value);
            Vue.set(v.ducks, clicked_index, source_value);
            this.source_index = null;
        // otherwise... just set a new source
        }else{
            this.source_index = clicked_index;
        }
    },
    getDuckClass: function(clicked_index) {
        if(this.source_index == clicked_index){
            return "source_index";
        }else if(this.left_target_index == clicked_index){
            return "target_duck";
        }else if(this.right_target_index == clicked_index){
            return "target_duck";
        }
    }
  }
})

</script>
    
</body>